<!DOCTYPE html>
<html lang="en-us">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Source Themes Academic 4.7.0">

  

  
  
  
  
  
    
    
    
  
  

  <meta name="author" content="Madeline Berger">

  
  
  
    
  
  <meta name="description" content="Examining steelhead salmon crossings at the Bonneville Dam">

  
  <link rel="alternate" hreflang="en-us" href="/project/times_series/">

  


  
  
  
  <meta name="theme-color" content="#4CA49EFF">
  

  
  

  
  
  
  
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css" integrity="sha256-uFVgMKfistnJAfoCUQigIl+JfUaP47GrRKjf6CTPVmw=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">

    
    
    
      
    
    
      
      
        
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/styles/github.min.css" crossorigin="anonymous" title="hl-light">
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/styles/dracula.min.css" crossorigin="anonymous" title="hl-dark" disabled>
        
      
    

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.5.1/leaflet.css" integrity="sha256-SHMGCYmST46SoyGgo4YR/9AlK1vf3ff84Aq9yK4hdqM=" crossorigin="anonymous">
    

    

    
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.1.2/lazysizes.min.js" integrity="sha256-Md1qLToewPeKjfAHU1zyPwOutccPAm5tahnaw7Osw0A=" crossorigin="anonymous" async></script>
      
    
      

      
      

      
    
      

      
      

      
    
      

      
      
        
      

      
    
      

      
      

      
    

  

  
  
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Cutive+Mono%7CLora:400,700%7CRoboto:400,700&display=swap">
  

  
  
  
  
  <link rel="stylesheet" href="/css/academic.css">

  




  


  

  <link rel="manifest" href="/index.webmanifest">
  <link rel="icon" type="image/png" href="/images/icon_hu0b7a4cb9992c9ac0e91bd28ffd38dd00_9727_32x32_fill_lanczos_center_2.png">
  <link rel="apple-touch-icon" type="image/png" href="/images/icon_hu0b7a4cb9992c9ac0e91bd28ffd38dd00_9727_192x192_fill_lanczos_center_2.png">

  <link rel="canonical" href="/project/times_series/">

  
  
  
  
  
    
  
  
  <meta property="twitter:card" content="summary_large_image">
  
  <meta property="og:site_name" content="Madeline Berger">
  <meta property="og:url" content="/project/times_series/">
  <meta property="og:title" content="Time series data wrangling, exploration and visualization | Madeline Berger">
  <meta property="og:description" content="Examining steelhead salmon crossings at the Bonneville Dam"><meta property="og:image" content="/project/times_series/featured.jpg">
  <meta property="twitter:image" content="/project/times_series/featured.jpg"><meta property="og:locale" content="en-us">
  
    
      <meta property="article:published_time" content="2020-03-10T00:00:00&#43;00:00">
    
    <meta property="article:modified_time" content="2020-03-10T00:00:00&#43;00:00">
  

  


    











<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Article",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "/project/times_series/"
  },
  "headline": "Time series data wrangling, exploration and visualization",
  
  "image": [
    "/project/times_series/featured.jpg"
  ],
  
  "datePublished": "2020-03-10T00:00:00Z",
  "dateModified": "2020-03-10T00:00:00Z",
  
  "author": {
    "@type": "Person",
    "name": "Madeline Berger"
  },
  
  "publisher": {
    "@type": "Organization",
    "name": "Madeline Berger",
    "logo": {
      "@type": "ImageObject",
      "url": "img//"
    }
  },
  "description": "Examining steelhead salmon crossings at the Bonneville Dam"
}
</script>

  

  


  


  





  <title>Time series data wrangling, exploration and visualization | Madeline Berger</title>

</head>

<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" >

  <aside class="search-results" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="Search..." autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search">
        
      </div>

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>


  







<nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
  <div class="container">

    
    <div class="d-none d-lg-inline-flex">
      <a class="navbar-brand" href="/">Madeline Berger</a>
    </div>
    

    
    <button type="button" class="navbar-toggler" data-toggle="collapse"
            data-target="#navbar-content" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
    <span><i class="fas fa-bars"></i></span>
    </button>
    

    
    <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
      <a class="navbar-brand" href="/">Madeline Berger</a>
    </div>
    

    
    
    <div class="navbar-collapse main-menu-item collapse justify-content-end" id="navbar-content">

      
      <ul class="navbar-nav d-md-inline-flex">
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#skills"><span>Skills</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#experience"><span>Experience</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#projects"><span>Projects</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/files/cv.pdf"><span>Resume</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#contact"><span>Contact</span></a>
        </li>

        
        

      

        
      </ul>
    </div>

    <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">
      
      <li class="nav-item">
        <a class="nav-link js-search" href="#"><i class="fas fa-search" aria-hidden="true"></i></a>
      </li>
      

      
      <li class="nav-item">
        <a class="nav-link js-dark-toggle" href="#"><i class="fas fa-moon" aria-hidden="true"></i></a>
      </li>
      

      

    </ul>

  </div>
</nav>


  <article class="article article-project">

  




















  
  
    
  


<div class="article-container pt-3">
  <h1>Time series data wrangling, exploration and visualization</h1>

  

  


<div class="article-metadata">

  
  

  
  <span class="article-date">
    
    
      
    
    Mar 10, 2020
  </span>
  

  

  

  
  
  

  
  

</div>

  














</div>


<div class="article-header article-container featured-image-wrapper mt-4 mb-4" style="max-width: 720px; max-height: 514px;">
  <div style="position: relative">
    <img src="/project/times_series/featured_hu7f0f9dbdb65bd8da561e0a8cac84abc3_3257553_720x0_resize_q90_lanczos.jpg" alt="" class="featured-image">
    
  </div>
</div>



  <div class="article-container">

    <div class="article-style">
      


<hr />
<div id="introduction" class="section level2">
<h2>Introduction</h2>
<p>This project uses data on steelhead salmon fish passage at the Bonneville Dam on the Columbia River to explore time series data cleaning and visualization. The data was compiled by the U.S. Army Corps of Engineers and includes a value for daily number of fish that passed through the dam from 1940 to 2019. Also included is the data with a column for year and another column for month and day.</p>
<p><em>References</em><br />
Columbia River DART, Columbia Basin Research, University of Washington. (2019). Adult Passage Graphics &amp; Text. Available from <a href="http://www.cbr.washington.edu/dart/query/adult_graph_text" class="uri">http://www.cbr.washington.edu/dart/query/adult_graph_text</a></p>
<hr />
</div>
<div id="analysis" class="section level2">
<h2>Analysis</h2>
<div id="data-cleaning-and-wrangling" class="section level3">
<h3>Data Cleaning and Wrangling</h3>
<p>To better visualize this data in multiple ways, the dates first need to be parsed into date format and cleaned. They are read in as character data, which will not work logically when graphed.</p>
<pre class="r"><code>#check out some of the columns - are they all necessary?

#unique(steelhead$datatype) #only one data type

#min(steelhead$year)

#first want to separate out the dates and parse data
steelhead_clean &lt;- steelhead %&gt;%
  mutate(
    date = paste(year, mm_dd, sep = &quot;-&quot;)
    ) %&gt;% 
  mutate(
    yr_mo_day = lubridate::parse_date_time(date, &quot;ydm&quot;),
    yr_mo_day = as.Date(yr_mo_day), #since ours started out as characters
    month_sep = yearmonth(yr_mo_day)
  ) %&gt;% 
  mutate(
    month = month(yr_mo_day, label = TRUE),
    value = as.numeric(value)
  ) %&gt;% 
  select(-mm_dd, -datatype, -location, -parameter) %&gt;% 
  drop_na(month_sep, value)
#check_NAs

#steelhead_dates_final &lt;- steelhead_dates[,c(4,5,1,3,2)]</code></pre>
</div>
<div id="time-series-plot" class="section level3">
<h3>Time Series Plot</h3>
<pre class="r"><code>#daily data is challenging - plot the whole yr_mo_day

steelhead_daily &lt;- ggplot(steelhead_clean, aes(x = yr_mo_day, y = value))+
  geom_line(color = &quot;royalblue1&quot;) + 
  theme_minimal()+
  labs(x = &quot;Date&quot;, y = &quot;Steelhead salmon passge&quot;)

steelhead_daily</code></pre>
<p><img src="/project/times_series/index_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
<p><strong>Figure 1. Daily steelhead salmon counts passing through Bonneville Dam on the Columbia River.</strong> Counts were recorded daily from 1940 to 2019.</p>
</div>
<div id="seasonplot" class="section level3">
<h3>Seasonplot</h3>
<pre class="r"><code>#group by month
steelhead_by_month &lt;- steelhead_clean %&gt;%
  group_by(month, year) %&gt;% 
  summarize(
    month_tot = sum(value)
  ) 


#plot 
steelhead_seasonplot &lt;- ggplot(data = steelhead_by_month , aes(x = month, y = month_tot, group = year)) +
   geom_line(aes(color = year))+
  theme_minimal()+
  scale_y_continuous(expand = c(0,0), breaks = seq(0, 400000, by = 50000), labels = scales::comma)+
  labs(x = &quot;Month&quot;, y = &quot;Total steelhead salmon passage&quot;, color = &quot;Year&quot;)


steelhead_seasonplot +
  scale_color_paletteer_c(&quot;pals::warmcool&quot;)</code></pre>
<p><img src="/project/times_series/index_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<p><strong>Figure 2. Monthly steelhead salmon passge at the Bonneville Dam on the Columbia River.</strong> Each line depicts a different year, with red colors indicating earlier recordings and blue colors indicating more recent data.</p>
</div>
<div id="annual-steelhead-passage" class="section level3">
<h3>Annual Steelhead passage</h3>
<pre class="r"><code>#group by year
steelhead_by_year &lt;- steelhead_clean %&gt;%
  group_by(year) %&gt;% 
  summarize(
    yearly_tot = sum(value)
  ) 


steelhead_yearly &lt;- ggplot(steelhead_by_year, aes(x = year, y = yearly_tot))+
  geom_line(color = &quot;salmon&quot;)+
  scale_y_continuous(expand = c(0,0), breaks = seq(0, 600000, by = 100000), labels = scales::comma)+
  theme_minimal()+
  labs(x = &quot;Year&quot;, y = &quot;Steelhead salmon passage&quot;)

steelhead_yearly</code></pre>
<p><img src="/project/times_series/index_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<p><strong>Figure 3. Yearly steelhead salmon trends at Bonneville Dam, Orgeon.</strong> The y-axis depicts the total number of fish counted at the dam for each year, ranging from 1940 to 2019.</p>
<hr />
</div>
</div>
<div id="results" class="section level2">
<h2>Results</h2>
<p>From these visualizations, we can see how steelhead numbers in the Columbia River have varied over time, as well as seasonaly. The daily passage time series plot indicates that steelhead counts have been somewhat consistent over time, with some cyclical patterns. The exception is one day in 2009 that had very high counts.</p>
<p>The season plot helps illuminate what may be driving some of the cyclical trends in the time series plot. Every year, there is a clear increase in steelhead salmon passage starting from June to Octover, peaking dramatically in August. However, we can see there have been differences in the magnitude of this peak over the years. There appears to be an increasing trend from 1940 - 2019.</p>
<p>The annual passage plot confirms this observation, showing that total yearly counts of steelhead started increasing in 1980, but then have decreased since 2010.</p>
</div>

    </div>

    


















  






  
  
  
    
  
  
  <div class="media author-card content-widget-hr">
    
      
      <img class="portrait mr-3" src="/authors/admin/avatar_hue05ce8d9f5e0da50f79f8cb758adc3d7_77317_250x250_fill_q90_lanczos_center.jpg" alt="Avatar">
    

    <div class="media-body">
      <h5 class="card-title"><a href="/">Madeline Berger</a></h5>
      <h6 class="card-subtitle">Master's student</h6>
      <p class="card-text">My interests include conservation, food systems, and data analysis.</p>
      <ul class="network-icon" aria-hidden="true">
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="/#contact" >
        <i class="fas fa-envelope"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://www.linkedin.com/in/madeline-berger-a803a27a/" target="_blank" rel="noopener">
        <i class="fab fa-linkedin"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://github.com/madelinemberger" target="_blank" rel="noopener">
        <i class="fab fa-github"></i>
      </a>
    </li>
  
</ul>

    </div>
  </div>









  
  



    <div class="project-related-pages content-widget-hr">
      
      

      
      
      

      
      
      

      
      
      
    </div>
  </div>
</article>

      

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>

      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/highlight.min.js" integrity="sha256-1zu+3BnLYV9LdiY85uXMzii3bdrkelyp37e0ZyTAQh0=" crossorigin="anonymous"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/languages/r.min.js"></script>
        
      

    

    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.5.1/leaflet.js" integrity="sha256-EErZamuLefUnbMBQbsEqu1USa+btR2oIlCpBJbyD4/g=" crossorigin="anonymous"></script>
    

    
    
    <script>const code_highlighting = true;</script>
    

    
    
    
    
    
    
    <script>
      const search_config = {"indexURI":"/index.json","minLength":1,"threshold":0.3};
      const i18n = {"no_results":"No results found","placeholder":"Search...","results":"results found"};
      const content_type = {
        'post': "Posts",
        'project': "Projects",
        'publication' : "Publications",
        'talk' : "Talks"
        };
    </script>
    

    
    

    
    
    <script id="search-hit-fuse-template" type="text/x-template">
      <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
      </div>
    </script>
    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js" integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>
    

    
    

    
    

    
    
    
    
    
    
    
    
    
      
    
    
    
    
    <script src="/js/academic.min.a0d331bcd05dbe8b31e244f796710f08.js"></script>

    






  
  
  <div class="container">
    <footer class="site-footer">
  
  <p class="powered-by">
    
      <a href="/privacy/">Privacy Policy</a>
    
    
       &middot; 
      <a href="/terms/">Terms</a>
    
  </p>
  

  <p class="powered-by">
    

    Powered by the
    <a href="https://sourcethemes.com/academic/" target="_blank" rel="noopener">Academic theme</a> for
    <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a>.

    
    <span class="float-right" aria-hidden="true">
      <a href="#" class="back-to-top">
        <span class="button_icon">
          <i class="fas fa-chevron-up fa-2x"></i>
        </span>
      </a>
    </span>
    
  </p>
</footer>

  </div>
  

  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

</body>
</html>
